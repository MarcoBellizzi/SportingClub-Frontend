<app-navbar></app-navbar>

<div style="margin-left: 2rem; margin-right: 2rem; margin-top: 1rem;">
    <div style="text-align: center; margin-bottom: 1rem;">
        <div>
            Giorno <p-calendar  [(ngModel)]="giorno"></p-calendar>
            <button style="margin-left: 2rem;" pButton type="button" label="Aggiorna"
                class="p-button-primary" (click)="aggiornaPrenotazioni()"></button>
        </div>
    </div>
    <p-table [columns]="campi" [value]="fasceOrarie" styleClass="p-datatable-sm">
        <ng-template pTemplate="header" let-varCampo>
            <tr>
                <th>Fascia Oraria</th>
                <th *ngFor="let campo of varCampo">
                    {{campo.nome}}
                </th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-fasciaOraria let-varCampo="columns">
            <tr>
                <td>{{fasciaOraria.inizio}} - {{fasciaOraria.fine}}</td>
                <td *ngFor="let campo of varCampo">
                    <div *ngIf="isPrenotato(fasciaOraria,campo) && tuaPrenotazione(fasciaOraria,campo)">
                        <button style="margin-right: 1rem;" pButton type="button" label="Annulla"
                            class="p-button-warning" (click)="annullaPrenotazione(fasciaOraria,campo)"></button> 
                    </div>
                    <div *ngIf="isPrenotato(fasciaOraria,campo) && !tuaPrenotazione(fasciaOraria,campo)">
                        <button style="margin-right: 1rem;" pButton type="button" label="Occupato"
                            class="p-button-danger"></button>
                    </div>
                    <div *ngIf="!isPrenotato(fasciaOraria,campo)">
                        <button style="margin-right: 1rem;" pButton type="button" label="Prenota"
                            class="p-button-primary" (click)="prenota(fasciaOraria,campo)"></button>
                    </div>
                </td>
            </tr>
        </ng-template>
    </p-table>
</div>


<p-toast position="top-center" key="tc" (onClose)="refresh()"></p-toast>